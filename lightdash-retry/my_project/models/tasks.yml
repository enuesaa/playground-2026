version: 2

models:
  - name: tasks
    description: Task data
    columns:
      - name: id
        description: Task ID
        meta:
          metrics:
            tasks_count:
              type: count 
      - name: user_id
        description: User ID
      - name: title
        description: Task title
      - name: status
        description: Task status
      - name: due_date
        description: Task due date
        meta:
          dimension:
            # label: 期限
            time_intervals: ['RAW', 'DAY', 'WEEK', 'MONTH', 'MONTH_NUM']
      - name: created_at
        description: Task created_at
    meta:
      primary_key: id
      joins:
        - join: users
          type: inner
          sql_on: ${tasks.user_id} = ${users.id}
          relationship: many-to-one
        - join: task_tags
          type: inner
          sql_on: ${tasks.id} = ${task_tags.task_id}
          relationship: one-to-many
        - join: tags
          type: inner
          sql_on: ${task_tags.tag_id} = ${tags.id}
          relationship: many-to-one
